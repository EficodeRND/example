{
  "devDependencies": {
    "@serverless/compose": "^1.3.0",
    "@types/node": "^20.8.4",
    "serverless": "^3.35.2",
    "serverless-appsync-plugin": "^2.3.1",
    "serverless-build-client": "^2.5.0",
    "serverless-cloudfront-invalidate": "^1.12.2",
    "serverless-domain-manager": "^7.1.2",
    "serverless-iam-roles-per-function": "^3.2.0",
    "serverless-localstack": "^1.1.2",
    "serverless-output-to-env": "^1.0.2",
    "serverless-plugin-conditional-functions": "^1.0.8",
    "serverless-prune-plugin": "^2.0.2",
    "serverless-pseudo-parameters": "^2.6.1",
    "serverless-python-requirements": "^6.0.0",
    "serverless-s3-sync": "^3.2.0",
    "serverless-sqs-alarms-plugin": "^0.1.7",
    "serverless-step-functions": "^3.17.0",
    "serverless-vpc-plugin": "^1.0.6",
    "shelljs": "^0.8.5",
    "ts-node": "^10.9.1",
    "typescript": "^5.2.2"
  },
  "scripts": {
    "deploy": "yarn yarn run start_localstack && run setup && yarn run dropdb && yarn run createdb && yarn run migratedb",
    "setup": "cd backend && LS_LOG=trace DEBUG=1 LOG_LEVEL=DEBUG EXTRA_CORS_ALLOWED_ORIGINS=* LAMBDA_MOUNT_CWD=$(pwd) serverless deploy -c serverless.local.yml --param architecture=x86_64 --stage local --verbose",
    "deploy_arm": "yarn run start_localstack && yarn run setup_arm && yarn run dropdb && yarn run createdb && yarn run migratedb",
    "setup_arm": "cd backend && LS_LOG=trace DEBUG=1 LOG_LEVEL=DEBUG EXTRA_CORS_ALLOWED_ORIGINS=* LAMBDA_MOUNT_CWD=$(pwd) DNS_ADDRESS=0.0.0.0 GATEWAY_LISTEN=0.0.0.0:4566 serverless deploy -c serverless.local.yml --param architecture=arm64 --stage local --verbose",
    "deploy_ci": "yarn run setup_ci && yarn run createdb && yarn run migratedb",
    "setup_ci": "cd backend && EXTRA_CORS_ALLOWED_ORIGINS=* LAMBDA_MOUNT_CWD=$(pwd) serverless deploy -c serverless.local.yml --param architecture=x86_64 --stage local --verbose",
    "start_localstack": "cd backend && LS_LOG=trace DEBUG=1 LOG_LEVEL=DEBUG ./venv/bin/localstack start --detached && ./venv/bin/localstack wait -t 30",
    "createdb": "cd backend && serverless invoke -c serverless.local.yml --stage local -f dbsetup --path test_data/createdb.json -l",
    "dropdb": "cd backend && serverless invoke -c serverless.local.yml --stage local -f dbsetup --path test_data/dropdb.json -l",
    "migratedb": "cd backend && serverless invoke -c serverless.local.yml --stage local -f dbmigrations -l",
    "invoke": "cd backend && serverless invoke -c serverless.local.yml --stage local -f",
    "logs": "cd backend && serverless logs -c serverless.local.yml --stage local -f",
    "deploy_function": "cd backend && serverless deploy function -c serverless.local.yml --stage local -f"
  }
}
